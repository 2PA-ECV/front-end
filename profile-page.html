<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Page</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/profile-page.css">
</head>
<body>
  <div class="header">
    <div class="left-section">
      <img src="images/2pa-logo.png" class="logo">
      <div class="text">2 PA</div>
    </div>
    <a href="index.html" class="logout-btn">Cerrar sesión</a>
  </div>
  <div class="profile-header">
    <div class="profile-picture">
      <img src="images/lucas.png" alt="Profile Picture">
    </div>
    <div class="profile-name">
      Lucas Andreu, 20
    </div>
  </div>

  <div class="actions">
    <div class="action">
      <i id="addFriendBtn" class="fas fa-user-plus"></i>
      <p>Añadir amigos</p>
    </div>
    <div class="action">
      <i id="editProfileBtn" class="fas fa-pen"></i>
      <p>Editar perfil</p>
    </div>
    <div class="action">
      <i id="addPhotoBtn" class="fas fa-camera add"></i>
      <p>Añadir fotos</p>
    </div>
  </div>

  <div class="navigation-container">
    <div class="navigation">
      <a href="like-page.html" class="nav-item"><i class="fas fa-house"></i></a>
      <a href="message-page.html" class="nav-item"><span class="nav-item comments"><i class="fas fa-comment"></i></span></a>
      <a href="#" class="nav-item"><i class="fas fa-user"></i></a>
    </div>
  </div>

  <div class="modal-bg" id="modal">
    <div class="modal-container">
      <button class="close-btn" id="closeModal">&times;</button>
      <h1>Gestionar Amistades</h1>

      <div class="modal-header">
        <button class="tab-btn active" onclick="showSection('addFriends')">Añadir Amigos</button>
        <button class="tab-btn" onclick="showSection('pendingRequests')">Solicitudes Pendientes</button>
        <button class="tab-btn" onclick="showSection('friendsList')">Lista de Amigos</button>
      </div>

      <!-- Búsqueda de nuevos amigos -->
      <div id="addFriendsSection" class="section active">
        <div class="hashtag-container">
          <p>Tu hashtag:</p>
          <div class="hashtag-container-inner">
            <div class="hashtag" id="userHashtag" onclick="copyHashtag()">#Cargando...</div>
            <i class="fab fa-whatsapp whatsapp-btn" onclick="shareViaWhatsApp()"></i>
          </div>
          <p id="copyMessage" style="display: none; color: #36D1DC;">¡Copiado!</p>
        </div>

        <div class="search-container">
          <p>Buscar un amigo por hashtag:</p>
          <input type="text" id="searchHashtag" placeholder="Ej: #JuanPerez22">
          <button onclick="searchFriend()">Buscar</button>
        </div>
      </div>

      <!-- Sección de solicitudes pendientes -->
      <div id="pendingRequestsSection" class="section">
        <ul id="pendingRequestsList">
          <!-- Aquí se llenarán las solicitudes pendientes dinámicamente -->
          <li class="request">
            <div class="request-info">
              <div class="request-name">Carlos García</div>
              <div class="request-hashtag">#CarlosG12</div>
            </div>
            <div class="request-actions">
              <button class="accept">Aceptar</button>
              <button class="reject">Rechazar</button>
            </div>
          </li>
          <li class="request">
            <div class="request-info">
              <div class="request-name">Ana Martínez</div>
              <div class="request-hashtag">#AnaM22</div>
            </div>
            <div class="request-actions">
              <button class="accept">Aceptar</button>
              <button class="reject">Rechazar</button>
            </div>
          </li>
        </ul>
      </div>

      <!-- Sección de lista de amigos -->
      <div id="friendsListSection" class="section">
        <ul id="friendsList">
          <!-- Aquí se llenarán los amigos dinámicamente -->
          <li class="friend">
            <div class="friend-info">
              <div class="friend-name">Juan Pérez</div>
              <div class="friend-hashtag">#JuanP22</div>
            </div>
            <div class="friend-actions">
              <button class="remove">Eliminar amigo</button>
            </div>
          </li>
          <li class="friend">
            <div class="friend-info">
              <div class="friend-name">Sara López</div>
              <div class="friend-hashtag">#SaraL32</div>
            </div>
            <div class="friend-actions">
              <button class="remove">Eliminar amigo</button>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <script>
  const modal = document.getElementById("modal");
    const closeModal = document.getElementById("closeModal");
    const addFriendBtn = document.getElementById("addFriendBtn");
    const searchHashtagInput = document.getElementById("searchHashtag");
    const userHashtag = document.getElementById("userHashtag");
    const copyMessage = document.getElementById("copyMessage");

    const addPhotoBtn = document.getElementById("addPhotoBtn");
    const editProfileBtn = document.getElementById("editProfileBtn");

    addFriendBtn.addEventListener("click", () => modal.style.display = "flex");
    closeModal.addEventListener("click", () => modal.style.display = "none");
    window.addEventListener("click", (e) => { 
      if (e.target === modal) modal.style.display = "none"; 
    });

    addPhotoBtn.addEventListener('click', (event) => {
      event.preventDefault(); 
      window.location.href = 'add-photos.html';
    });

    editProfileBtn.addEventListener('click', (event) => {
      event.preventDefault(); 
      window.location.href = 'edit-profile.html';
    });


    function showSection(section) {
      document.querySelectorAll('.section').forEach(sec => {
        sec.style.display = 'none';
        sec.classList.remove('active');
      });

      const activeSection = document.getElementById(`${section}Section`);
      if (activeSection) {
        activeSection.style.display = 'block';
        activeSection.classList.add('active');
      }

      document.querySelectorAll('.tab-btn').forEach(tab => tab.classList.remove('active'));
      const activeTab = document.querySelector(`button[onclick="showSection('${section}')"]`);
      if (activeTab) {
        activeTab.classList.add('active');
      }
    }

    showSection('addFriends');
  </script>
  
  <script src="scripts/profile-page.js"></script>
  <script src="scripts/friends.js"></script>

</body>
</html>
